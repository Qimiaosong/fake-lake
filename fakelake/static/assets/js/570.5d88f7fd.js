"use strict";(self["webpackChunkdata_lake_analytics"]=self["webpackChunkdata_lake_analytics"]||[]).push([[570],{7570:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});l(7658);var t=l(6252),o=l(2262),d=l(9963),n=l(3577),u=l(3907),r=l(2201),i=l(9737),s=l(1348),m=l(3625),p=l(219),c=l(6583),g=l(5781);const w=e=>((0,t.dD)("data-v-3954ed38"),e=e(),(0,t.Cn)(),e),f={class:"main"},b=w((()=>(0,t._)("p",{class:"component-heading"},"数据建模",-1))),k={class:"btn-box"},_={style:{display:"flex","align-items":"center"}},y={style:{margin:"0"}},h={class:"table-cell-btn-box btn-box"},v=w((()=>(0,t._)("span",{class:"label"},"添加操作类型",-1))),W=w((()=>(0,t._)("span",{class:"label"},"添加指标",-1))),V=w((()=>(0,t._)("span",{class:"label"},"添加输出列",-1))),T={key:0,class:"log"};var U=(0,t.aZ)({__name:"DataModelingView",setup(e){const a=(0,u.oR)(),l=(0,r.tv)(),w=(0,o.iH)(!1),U=(0,o.iH)(!1),M=(0,o.iH)(!0),C=(0,o.iH)(!1),D=(0,o.iH)(),x=(0,o.iH)([]),S=(0,o.iH)([]),j=(0,o.iH)([0]),N=(0,o.iH)(),H=(0,o.iH)([]),E=(0,o.iH)([]),q=(0,o.qj)({name:[{validator:c.ym,trigger:"blur",required:!0}],sourceDB:[{required:!0,trigger:"blur",message:"不能为空"}],sourceTable:[{required:!0,trigger:"blur",message:"不能为空"}],sinkTableName:[{required:!0,trigger:"blur",message:"不能为空"}],sourceProcessType:[{required:!0,trigger:"blur",message:"不能为空"}],data_dimensions:[{required:!0,trigger:"blur",message:"不能为空"}],joinType:[{required:!0,trigger:"blur",message:"不能为空"}],rightTableName:[{required:!0,trigger:"blur",message:"不能为空"}],conditionColumns:[{required:!0,trigger:"blur",message:"不能为空"}],condititions:[{required:!0,trigger:"blur",message:"不能为空"}],columnName:[{required:!0,trigger:"blur",message:"不能为空"}],rangeColumn:[{required:!0,trigger:"blur",message:"不能为空"}]}),R=[{label:"groupby",value:0},{label:"join",value:1},{label:"filter",value:2},{label:"countDistinct",value:3}];(0,t.wF)((()=>{_e(),Y()}));const L=()=>{a.dispatch("dataLake/getDataLakeTaskList")},Y=()=>{a.dispatch("dataModeling/getdataModelingTaskList")},P=((0,t.Fl)((()=>(a.state.dataLake.dataLakeList.forEach((e=>{e.disabled=1!=e.status})),a.state.dataLake.dataLakeList))),()=>{let e,l;return a.state.dataModeling.curDataModelingTask.operators.forEach(((a,t)=>{0==a.operatorType?l=t:1==a.operatorType&&(e=t)})),void 0!=l&&void 0!=e&&l>e}),z=(0,t.Fl)((()=>a.state.dataModeling.curDataModelingTask.operators[0].sourceTable)),I=(0,t.Fl)((()=>{let e=[],l=a.state.dataModeling.curDataModelingTask.operators.find((e=>1==e.operatorType));return l.outputCols?.forEach((a=>{e.push(a.aliasName)})),e})),K=e=>{a.state.dataModeling.curDataModelingTask=e},A=e=>{$(!0),U.value=!1,M.value=!1,K(e)},B=()=>{$(!1)},O=async()=>{await L(),a.state.dataModeling.curDataModelingTask={name:"",env_id:-1,operators:[{operatorType:0,name:"",sourceDB:"",sourceTable:"",sourceProcessType:"stream",readStartTime:"1999-11-11 00:00:00",data_dimensions:[],metrics:[{name:"",function:"",alias:""}],processType:"stream"}],description:"",owner_id:1},$(!0),U.value=!0,M.value=!0,F(a.state.dataModeling.curDataModelingTask.env_id)},F=async e=>{a.dispatch("dataAnalyze/getTablesByEnv",{envID:e}).then((e=>{a.state.dataModeling.curDataModelingTask.operators.forEach(((e,a)=>{e.sourceDB="",e.sourceTable=""})),H.value=[],E.value=[],10013==e.data.code&&(H.value=e.data.data)}))},Z=async({row:e})=>{await L(),$(!0),U.value=!0,M.value=!1,K(e),await F(a.state.dataModeling.curDataModelingTask.env_id),Q(e.operators[0].sourceDB)},$=e=>{w.value=e},G=e=>H.value.find((a=>a.dbname==e)),Q=e=>{E.value=G(e).tables},J=e=>{Q(e),re()},X=e=>e.operators.find((e=>0==e.operatorType||3==e.operatorType))?.operatorType,ee=({row:e})=>{K(e),a.dispatch("dataAnalyze/chartByExecuteSql",{id:e.id,operatorType:X(a.state.dataModeling.curDataModelingTask),row:e}).then((a=>{10013==a.data.code&&l.push({path:"/home/dataAnalyze",query:{id:e.id}})}))},ae=({row:e})=>{C.value=!0,a.dispatch("dataModeling/viewLog",{id:e.id})},le=()=>{let e=[D.value,...x.value,...S.value];(0,c.R2)(e).then((e=>{a.dispatch("dataModeling/createdataModelingTask").then((()=>{$(!1)}))})).catch((e=>{console.log(e)}))},te=async()=>{let e=[D.value,...x.value];(0,c.R2)(e).then((e=>{a.dispatch("dataModeling/updatedataModelingTask").then((()=>{$(!1)}))})).catch((e=>{console.log(e)}))},oe=({row:e,$index:l})=>{a.dispatch("dataModeling/deletedataModelingTask",{id:e.id})},de=({row:e})=>{a.dispatch("dataModeling/startdataModelingTask",{row:e})},ne=({row:e})=>{a.dispatch("dataModeling/stopdataModelingTask",{row:e})},ue=e=>{let a=E.value?.filter((a=>a.name===e))[0]?.fields,l=[];return a?.forEach((e=>{l.push(e.name)})),l},re=()=>{a.state.dataModeling.curDataModelingTask.operators.forEach(((e,a)=>{e.sourceTable="",e.data_dimensions="",e.metrics=[{name:"",function:"",alias:""}],e.columnName="",e.rangeColumn="",e.outputCols=[{tableName:"",columnName:"",aliasName:""}]}))},ie=()=>{a.commit("dataModeling/ADD_OPERATOR"),j.value=[a.state.dataModeling.curDataModelingTask.operators.length-1]},se=(e,l)=>{a.commit("dataModeling/CHANGE_OPERATOR",{index:e,type:l})},me=e=>{i.T.confirm("确定要删除该配置吗?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{a.commit("dataModeling/DELETE_OPERATOR",{index:e})})).catch((()=>{(0,s.z8)({type:"info",message:"Delete canceled"})}))},pe=e=>{a.commit("dataModeling/ADD_METRICS",{index:e})},ce=(e,l)=>{a.commit("dataModeling/DELETE_METRICS",{operatorsIndex:e,metricsIndex:l})},ge=e=>{a.commit("dataModeling/ADD_OUTPUTCOLS",{index:e})},we=(e,l)=>{a.commit("dataModeling/DELETE_OUTPUTCOLS",{operatorsIndex:e,OutputColsIndex:l})},fe=e=>{e.alias=e.function+"_"+e.name},be=(e,a)=>{e.aliasName=e.tableName+"_"+e.columnName,a.outputCols.forEach(((l,t)=>{e.aliasName===l.aliasName&&t!=a.outputCols.length-1&&i.T.alert("别名不能重复","警告",{confirmButtonText:"好的",callback:e=>{(0,s.z8)({type:"warning",message:"请选择新别名"})}})}))},ke=({row:e})=>e.operators?.some(((e,a)=>0==e.operatorType||3==e.operatorType)),_e=()=>{a.dispatch("environment/getEnvList")},ye=e=>{a.state.dataModeling.pageInfo.currentPage=e,Y()},he=(0,c.Ds)((()=>{ye(1)}),500),ve=()=>{he()};return(0,t.Ah)((()=>{clearTimeout(N.value)})),(e,l)=>{const u=(0,t.up)("el-button"),r=(0,t.up)("el-input"),i=(0,t.up)("el-table-column"),s=(0,t.up)("SvgIcon"),N=(0,t.up)("el-tooltip"),L=(0,t.up)("el-table"),Y=(0,t.up)("el-form-item"),K=(0,t.up)("el-form"),F=(0,t.up)("el-option"),G=(0,t.up)("el-select"),Q=(0,t.up)("el-date-picker"),X=(0,t.up)("el-col"),re=(0,t.up)("el-row"),_e=(0,t.up)("el-collapse-item"),he=(0,t.up)("el-collapse"),We=(0,t.up)("el-empty"),Ve=(0,t.up)("el-drawer"),Te=(0,t.Q2)("permission");return(0,t.wg)(),(0,t.iD)("div",f,[b,(0,t._)("div",k,[(0,t.Wm)(u,{class:"create-btn",type:"primary",onClick:O},{default:(0,t.w5)((()=>[(0,t.Uk)("添加建模数据")])),_:1}),(0,t.Wm)(r,{modelValue:(0,o.SU)(a).state.dataModeling.searchContent,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,o.SU)(a).state.dataModeling.searchContent=e),onInput:ve,placeholder:"根据名称查询"},null,8,["modelValue"])]),(0,t.Wm)(L,{data:(0,o.SU)(a).state.dataModeling.dataModelingTaskList,onRowClick:(0,d.iM)(A,["self"]),style:{width:"100%"},"empty-text":"没有数据"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{prop:"name",label:"名称"}),(0,t.Wm)(i,{prop:"status",label:"启动状态"},{default:(0,t.w5)((e=>[(0,t._)("div",_,[(0,t._)("div",{style:(0,n.j5)({width:"6px",height:"6px",borderRadius:"50%",backgroundColor:(0,o.SU)(c.HR)(e.row.status)?.color,marginRight:"5px"})},null,4),(0,t._)("p",y,(0,n.zw)((0,o.SU)(c.HR)(e.row.status)?.text),1)])])),_:1}),(0,t.Wm)(i,{prop:"updated_at",label:"更新日期",formatter:(0,o.SU)(c.lI)},null,8,["formatter"]),(0,t.Wm)(i,{prop:"operation",label:"操作"},{default:(0,t.w5)((e=>[(0,t._)("div",h,[(0,t.Wm)(N,{effect:"dark",content:"编辑",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{size:"small",circle:"",onClick:(0,d.iM)((a=>Z(e)),["stop"]),class:"icon-button"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"edit",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])),[[Te,"update"]])])),_:2},1024),(0,t.Wm)(N,{effect:"dark",content:"删除",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{size:"small",circle:"",onClick:(0,d.iM)((a=>(0,o.SU)(c.qK)(e,oe)),["stop"]),disabled:0==e.row.status||1==e.row.status,class:"icon-button"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"delete",stroke:"#f56c6c"})])),_:2},1032,["onClick","disabled"])),[[Te,"delete"]])])),_:2},1024),0!=e.row.status&&1!=e.row.status?((0,t.wg)(),(0,t.j4)(N,{key:0,effect:"dark",content:"启动后可查看报表",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{size:"small",circle:"",onClick:(0,d.iM)((a=>de(e)),["stop"]),class:"icon-button"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"start",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])])),_:2},1024)):((0,t.wg)(),(0,t.j4)(N,{key:1,effect:"dark",content:"停止任务",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{size:"small",circle:"",onClick:(0,d.iM)((a=>ne(e)),["stop"]),class:"icon-button"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"pause",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])])),_:2},1024)),(0,t.Wm)(N,{effect:"dark",content:"日志",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{size:"small",circle:"",onClick:(0,d.iM)((a=>ae(e)),["stop"]),disabled:-1==e.row.status,class:"icon-button"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"log",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick","disabled"])])),_:2},1024),(0,t.Wm)(N,{effect:"dark",content:"查看报表",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{onClick:(0,d.iM)((a=>ee(e)),["stop"]),disabled:1!=e.row.status||!ke(e),type:"primary",icon:(0,o.SU)(g.Histogram),circle:"",plain:""},null,8,["onClick","disabled","icon"])])),_:2},1024)])])),_:1})])),_:1},8,["data","onRowClick"]),(0,t.Wm)(m.Z,{show:w.value,onHandleShow:l[6]||(l[6]=e=>$(!1))},{popup:(0,t.w5)((()=>[(0,t.Wm)(K,{"label-width":"150px",disabled:!U.value},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{model:(0,o.SU)(a).state.dataModeling.curDataModelingTask,ref_key:"ruleFormRef1",ref:D,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{disabled:!M.value,modelValue:(0,o.SU)(a).state.dataModeling.curDataModelingTask.name,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(a).state.dataModeling.curDataModelingTask.name=e)},null,8,["disabled","modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,t._)("p",null,[(0,t.Wm)(u,{onClick:ie,type:"primary",icon:(0,o.SU)(g.Plus),circle:""},null,8,["icon"]),v]),(0,t.Wm)(he,{modelValue:j.value,"onUpdate:modelValue":l[2]||(l[2]=e=>j.value=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(a).state.dataModeling.curDataModelingTask.operators,((a,l)=>((0,t.wg)(),(0,t.j4)(_e,{key:l,name:l},{title:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"操作",class:"collapse-header"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.operatorType,"onUpdate:modelValue":e=>a.operatorType=e,onChange:e=>se(l,e),placeholder:"请选择",style:{width:"240px"},"no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(R,((e,a)=>(0,t.Wm)(F,{key:a,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),(0,t.Wm)(u,{onClick:e=>me(l),type:"danger",icon:(0,o.SU)(g.Delete),circle:"",style:{margin:"0 20px"}},null,8,["onClick","icon"])])),_:2},1024)])),default:(0,t.w5)((()=>[(0,t.Wm)(K,{model:a,ref_for:!0,ref_key:"ruleFormRef2",ref:x,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"名称",style:{width:"370px"},prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]),0==l?((0,t.wg)(),(0,t.j4)(K,{key:0,model:a,ref_for:!0,ref_key:"ruleFormRef3",ref:S,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"数据库名",prop:"sourceDB"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.sourceDB,"onUpdate:modelValue":e=>a.sourceDB=e,onChange:J,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(H.value,((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e.dbname,value:e.dbname},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(Y,{label:"表名",prop:"sourceTable"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.sourceTable,"onUpdate:modelValue":e=>a.sourceTable=e,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(E.value,((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(Y,{label:"源数据开始时间"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:a.readStartTime,"onUpdate:modelValue":e=>a.readStartTime=e,type:"datetime",placeholder:"请选择时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(Y,{label:"源数据处理类型",prop:"sourceProcessType"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.sourceProcessType,"onUpdate:modelValue":e=>a.sourceProcessType=e,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:"stream",value:"stream"}),(0,t.Wm)(F,{label:"batch",value:"batch"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"])):(0,t.kq)("",!0),0==a.operatorType?((0,t.wg)(),(0,t.j4)(K,{key:1,model:a,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"分组列",prop:"data_dimensions"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.data_dimensions,"onUpdate:modelValue":e=>a.data_dimensions=e,multiple:"",placeholder:"请选择",style:{width:"240px"},"no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(P()?(0,o.SU)(I):ue((0,o.SU)(z)),((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("p",null,[(0,t.Wm)(u,{onClick:e=>pe(l),type:"primary",icon:(0,o.SU)(g.Plus),circle:""},null,8,["onClick","icon"]),W]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.metrics,((e,a)=>((0,t.wg)(),(0,t.j4)(re,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"列名",prop:`metrics[${a}].name`},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,placeholder:"请选择",onChange:a=>fe(e),"no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(P()?(0,o.SU)(I):ue((0,o.SU)(z)),((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])),_:2},1024),(0,t.Wm)(X,{span:6},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"算子",class:"col",prop:`metrics[${a}].function`},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:e.function,"onUpdate:modelValue":a=>e.function=a,placeholder:"请选择",onChange:a=>fe(e),"no-data-text":"没有数据"},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:"求和",value:"sum"}),(0,t.Wm)(F,{label:"求平均",value:"avg"})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])),_:2},1024),(0,t.Wm)(X,{span:6},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"别名",class:"col",prop:"metrics.alias"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:e.alias,"onUpdate:modelValue":a=>e.alias=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(X,{span:4},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{onClick:e=>ce(l,a),type:"danger",icon:(0,o.SU)(g.Delete),circle:""},null,8,["onClick","icon"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["model","rules"])):(0,t.kq)("",!0),1==a.operatorType?((0,t.wg)(),(0,t.j4)(K,{key:2,model:a,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"连接类型",prop:"joinType"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.joinType,"onUpdate:modelValue":e=>a.joinType=e,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{label:"inner",value:"inner"}),(0,t.Wm)(F,{label:"full",value:"full"}),(0,t.Wm)(F,{label:"left",value:"left"}),(0,t.Wm)(F,{label:"right",value:"right"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(Y,{label:"右表名称",prop:"rightTableName"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.rightTableName,"onUpdate:modelValue":e=>a.rightTableName=e,onChange:e.handleLAndRTableCol,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(E.value,((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024),(0,t.Wm)(Y,{label:"连接条件",prop:"conditionColumns"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:a.conditionColumns,"onUpdate:modelValue":e=>a.conditionColumns=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("p",null,[(0,t.Wm)(u,{onClick:e=>ge(l),type:"primary",icon:(0,o.SU)(g.Plus),circle:""},null,8,["onClick","icon"]),V]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.outputCols,((e,d)=>((0,t.wg)(),(0,t.j4)(re,{key:d},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"表名"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:e.tableName,"onUpdate:modelValue":a=>e.tableName=a,onChange:l=>be(e,a),placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[(0,o.SU)(z)?((0,t.wg)(),(0,t.j4)(F,{key:0,label:(0,o.SU)(z),value:(0,o.SU)(z)},null,8,["label","value"])):(0,t.kq)("",!0),a.rightTableName&&a.rightTableName!=(0,o.SU)(z)?((0,t.wg)(),(0,t.j4)(F,{key:1,label:a.rightTableName,value:a.rightTableName},null,8,["label","value"])):(0,t.kq)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(X,{span:6,class:"col"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"列名"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:e.columnName,"onUpdate:modelValue":a=>e.columnName=a,onChange:l=>be(e,a),placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ue(e.tableName)||"",((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(X,{span:6,class:"col"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"别名"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:e.aliasName,"onUpdate:modelValue":a=>e.aliasName=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(X,{span:4},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{onClick:e=>we(l,d),type:"danger",icon:(0,o.SU)(g.Delete),circle:""},null,8,["onClick","icon"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["model","rules"])):(0,t.kq)("",!0),2==a.operatorType?((0,t.wg)(),(0,t.j4)(K,{key:3,model:a,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"过滤条件",prop:"condititions"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:a.condititions,"onUpdate:modelValue":e=>a.condititions=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"])):(0,t.kq)("",!0),3==a.operatorType?((0,t.wg)(),(0,t.j4)(K,{key:4,model:a,rules:q,"label-width":"150px"},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{label:"列名",prop:"columnName"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.columnName,"onUpdate:modelValue":e=>a.columnName=e,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ue((0,o.SU)(z)),((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(Y,{label:"分组列",prop:"rangeColumn"},{default:(0,t.w5)((()=>[(0,t.Wm)(G,{modelValue:a.rangeColumn,"onUpdate:modelValue":e=>a.rangeColumn=e,multiple:"",placeholder:"请选择",style:{width:"240px"},"no-data-text":"没有数据"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(ue((0,o.SU)(z)),((e,a)=>((0,t.wg)(),(0,t.j4)(F,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"])):(0,t.kq)("",!0)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(Y,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,o.SU)(a).state.dataModeling.curDataModelingTask.description,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.SU)(a).state.dataModeling.curDataModelingTask.description=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[M.value?((0,t.wg)(),(0,t.j4)(u,{key:0,type:"primary",onClick:l[4]||(l[4]=e=>le())},{default:(0,t.w5)((()=>[(0,t.Uk)("创建")])),_:1})):((0,t.wg)(),(0,t.j4)(u,{key:1,type:"primary",onClick:l[5]||(l[5]=e=>te())},{default:(0,t.w5)((()=>[(0,t.Uk)("更新")])),_:1})),(0,t.Wm)(u,{onClick:B},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["disabled"])])),_:1},8,["show"]),(0,t.Wm)(p.Z,{module:(0,o.SU)(a).state.dataModeling.pageInfo,onChangePage:ye},null,8,["module"]),(0,t.Wm)(Ve,{modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=e=>C.value=e),title:"日志",direction:"rtl",size:"60%"},{default:(0,t.w5)((()=>[(0,o.SU)(a).state.dataModeling.log?((0,t.wg)(),(0,t.iD)("pre",T,(0,n.zw)((0,o.SU)(a).state.dataModeling.log),1)):((0,t.wg)(),(0,t.j4)(We,{key:1,description:"空"}))])),_:1},8,["modelValue"])])}}}),M=l(3744);const C=(0,M.Z)(U,[["__scopeId","data-v-3954ed38"]]);var D=C}}]);
//# sourceMappingURL=570.5d88f7fd.js.map