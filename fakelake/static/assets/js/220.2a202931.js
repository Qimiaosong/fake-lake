"use strict";(self["webpackChunkdata_lake_analytics"]=self["webpackChunkdata_lake_analytics"]||[]).push([[220],{220:function(e,a,l){l.r(a),l.d(a,{default:function(){return J}});l(7658);var r=l(6252),t=l(2262),s=l(3577),o=l(9963),u=l(2201),m=l(3907),d=l(3625),p=l(219),i=l(6583);const n=e=>((0,r.dD)("data-v-19853d2c"),e=e(),(0,r.Cn)(),e),c=n((()=>(0,r._)("p",{class:"component-heading"},"数据出湖",-1))),_={class:"btn-box"},v={style:{display:"flex","align-items":"center"}},b={style:{margin:"0"}},g={class:"table-cell-btn-box btn-box"},w={class:"wrap-form"},f={class:"wrap-form"},k={style:{width:"100%",display:"flex","flex-wrap":"nowrap"}},y={key:1},h={key:2},V={key:3},W={key:0,class:"wrap-form"},x={class:"self-row"},U={class:"self-row"},N={key:1,class:"wrap-form"},C={class:"self-row"},S={class:"self-row"},j={class:"self-row"},D={key:2,class:"wrap-form"},L={class:"self-row"},E={class:"self-row"},q={key:0,class:"log"};var O=(0,r.aZ)({__name:"DataLakeExportView",setup(e){const a=(0,u.tv)(),l=(0,m.oR)(),n=(0,t.iH)(!1),O=(0,t.iH)(null),H=(0,t.iH)(!1),z=(0,t.iH)(!1),J=(0,t.iH)(null),T=(0,t.iH)(),R=(0,t.iH)("否"),F=(0,t.iH)("");let G=(0,t.qj)({res:[],tables:[],dbNames:[],tableNames:[],fields:[]}),I=(0,t.qj)({res:[],tables:[],dbNames:[],tableNames:[],fields:[]}),K=(0,t.iH)([]);const M={0:{resource_params:{use_batch:!0,"source.parallelism":4,"sink.parallelism":4,"job.checkpoint_interval":3e5,server_time_zone:"UTC"},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,radio:"创建新表"}},1:{resource_params:{data_consumer_type:0,is_add_partition:0,topic_rex:"",dbname:"",kafka_schema_registry_url:""},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,radio:"创建新表"}},2:{resource_params:{num_executors:4,executor_cores:2,executor_memory:[4,"G"],driver_cores:1,driver_memory:[2,"G"]},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,range_partition_key:[],hash_partition_key:[],radio:"创建新表"}},3:{resource_params:{use_batch:!0,"source.parallelism":4,"sink.parallelism":4,"job.checkpoint_interval":3e5,server_time_zone:"UTC"},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,radio:"创建新表"}},4:{resource_params:{use_batch:!0,"source.parallelism":4,"sink.parallelism":4,"job.checkpoint_interval":3e5,server_time_zone:"UTC"},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,radio:"创建新表"}}},Y={name:"",job_id:null,source_params:{env:{id:-1,name:""},dbName:"",tableName:""},target_params:{type:"",datasource_id:"",db_name:"",table_name:null,radio:"创建新表"},resource_params:JSON.parse(JSON.stringify(M[0].resource_params)),is_scheduled:!1,scheduler_info:{type:0,schedule_cron_expression:["*","*","*","*","*"],schedule_interval:1,schedule_type:1},description:"",env_id:-1,owner_id:-1},P=(0,t.iH)(JSON.parse(JSON.stringify(Y))),Z=(0,t.qj)({name:[{validator:i.ym,trigger:"blur",required:!0}],"source_params.env.id":[{required:!0,trigger:"change",message:"不能为空"}],"source_params.dbName":[{required:!0,trigger:"change",message:"不能为空"}],"source_params.tableName":[{required:!0,trigger:"change",message:"不能为空"}],"target_params.db_name":[{required:!0,trigger:["change","blur"],message:"不能为空"}],"target_params.table_name":[{required:!0,trigger:["change","blur"],message:"不能为空"}],"target_params.datasource_id":[{required:!0,trigger:["change","blur"],message:"不能为空"}]});(0,r.wF)((()=>{A()}));const A=()=>{l.dispatch("dataLakeExport/getDataLakeExportList",{searchContent:F.value})},B=(0,r.Fl)((()=>l.state.dataLakeExport.dataLakeExportList)),Q=async()=>{await l.dispatch("dataSource/getDataSourceList")},$=(0,r.Fl)((()=>l.state.dataSource.dataSourceList)),X=async e=>{e&&await Q()},ee=(0,r.Fl)((()=>{let e=l.state.dataSource.dataSourceList.filter((e=>1!=e?.type));return e})),ae=async e=>{$.value&&$.value.length>0||await Q();const a=$.value?.find((a=>a.id===e));return a},le=async e=>{const a=await ae(e),l=a?.type;P.value.resource_params=JSON.parse(JSON.stringify(M[l]?.resource_params))||{},P.value.target_params=JSON.parse(JSON.stringify(M[l]?.target_params))||{},P.value.target_params.datasource_id=e,P.value.target_params.type=l},re=async e=>{await l.dispatch("dataSource/getDBSchema",{id:e}).then((e=>{I.res=[],I.dbNames=[],1e4===e.data.code?(I.res=e.data.data,I.dbNames=I.res?.map((e=>e.dbname))||[]):Object.assign(I,{res:[],tables:[],dbNames:[],tableNames:[],fields:[]})})).catch((e=>{console.log(e)}))},te=e=>{e&&re(P.value.target_params.datasource_id)},se=e=>{I.tables=I?.res?.find((a=>a.dbname===e))?.tables||[]},oe=e=>{se(e);const a={table_name:"",range_partition_key:[],hash_partition_key:[]};Ve(P.value.target_params,a)},ue=async e=>{e&&(H.value&&(await re(P.value.target_params.datasource_id),se(P.value?.target_params["db_name"])),I.tableNames=I.tables.map((e=>e.name))||[])},me=e=>{I.fields=I.tables.find((a=>a.name===e))?.fields||[]},de=e=>{me(e);const a={range_partition_key:[],hash_partition_key:[]};Ve(P.value.target_params,a)},pe=((0,r.Fl)((()=>l.state.environment.envList)),()=>l.dispatch("dataAnalyze/getTablesByEnv",{envID:P.value.source_params.env?.id||null}).then((e=>{G.res=[],G.dbNames=[],10013==e.data.code?(G.res=e.data.data,G.dbNames=G.res?.map((e=>e.dbname))):Object.assign(G,{res:[],tables:[],dbNames:[],tableNames:[],fields:[]})})).catch((e=>{console.log(e)}))),ie=e=>{G.tables=G.res?.find((a=>a.dbname===e))?.tables||[]},ne=e=>{e&&pe()},ce=e=>{ie(e),P.value.source_params.tableName=""},_e=async e=>{e&&(H.value&&(await pe(),ie(P.value.source_params?.dbName)),G.tableNames=G.tables.map((e=>e.name)))},ve=e=>{if(be(e),"创建新表"===P.value.target_params["radio"]){const e={range_partition_key:[],hash_partition_key:[]};Ve(P.value.target_params,e)}},be=e=>{G.fields=G.tables.find((a=>a.name===e))?.fields||[]},ge=e=>{n.value=e},we=async()=>{P.value=JSON.parse(JSON.stringify(Y)),H.value=!1,ge(!0)},fe=async()=>{let e=[T.value];(0,i.R2)(e).then((e=>{P.value.scheduler_info=O.value?.formData,l.dispatch("dataLakeExport/createDataLakeExportTask",{curDataLakeExport:P.value}).then((e=>{10002!=e?.data?.code&&ge(!1)}))})).catch((e=>{console.log(e)}))},ke=async({row:e})=>{await l.dispatch("dataLakeExport/getDataLakeExportDetails",e).then((e=>{P.value=1e4==e?.data?.code?e.data.data:JSON.parse(JSON.stringify(Y))})).catch((e=>{console.log("err",e)})),await Q(),H.value=!0,ge(!0)},ye=async()=>{let e=[T.value];(0,i.R2)(e).then((e=>{P.value.scheduler_info=O.value?.formData,l.dispatch("dataLakeExport/updateDataLakeExportTask",{curDataLakeExport:P.value}).then((()=>{ge(!1)}))})).catch((e=>{console.log(e)}))},he=e=>![null,void 0,""].includes(e),Ve=(e,a)=>{for(const l in a)Object.hasOwnProperty.call(e,l)&&(e[l]=a[l])},We=async e=>{e&&("创建新表"===P.value.target_params["radio"]?(H.value&&(await pe(),ie(P.value.source_params?.dbName),be(P.value.source_params?.tableName)),K.value=G.fields):(H.value&&(await re(P.value.target_params.datasource_id),se(P.value?.target_params["db_name"]),me(P.value?.target_params["table_name"])),K.value=I.fields))},xe=e=>{P.value.target_params.db_name="",P.value.target_params.table_name="",P.value.target_params.range_partition_key=[],P.value.target_params.hash_partition_key=[]},Ue=()=>{ge(!1)},Ne=({row:e,$index:a})=>{l.dispatch("dataLakeExport/deleteDataLakeExportTask",{id:e.id})},Ce=({row:e})=>{l.dispatch("dataLakeExport/startDataLakeExportTask",{row:e})},Se=({row:e})=>{l.dispatch("dataLakeExport/stopDataLakeExportTask",{row:e})},je=({row:e})=>{l.dispatch("dataLakeExport/resumeTask",{row:e})},De=({row:e})=>{J.value=null,z.value=!0,l.dispatch("dataLakeExport/viewLog",{id:e.id}).then((e=>{J.value=e.data})).catch((e=>{}))},Le=e=>{l.commit("dataLakeExport/SET_PAGE_INFO",{currentPage:e}),A()},Ee=(0,i.Ds)((()=>{Le(1)}),500),qe=()=>{Ee()};return(e,u)=>{const m=(0,r.up)("el-button"),O=(0,r.up)("el-input"),M=(0,r.up)("el-table-column"),Y=(0,r.up)("SvgIcon"),A=(0,r.up)("el-tooltip"),Q=(0,r.up)("el-table"),$=(0,r.up)("el-form-item"),ae=(0,r.up)("el-option"),re=(0,r.up)("el-select"),se=(0,r.up)("el-radio-button"),me=(0,r.up)("el-radio-group"),pe=(0,r.up)("el-input-number"),ie=(0,r.up)("el-switch"),be=(0,r.up)("el-row"),Ve=(0,r.up)("el-form"),Ee=(0,r.up)("el-empty"),Oe=(0,r.up)("el-drawer"),He=(0,r.Q2)("permission");return(0,r.wg)(),(0,r.iD)("div",null,[c,(0,r._)("div",_,[(0,r.wy)(((0,r.wg)(),(0,r.j4)(m,{class:"create-btn",type:"primary",onClick:we},{default:(0,r.w5)((()=>[(0,r.Uk)("添加出湖任务")])),_:1})),[[He,"create"]]),(0,r.Wm)(O,{modelValue:F.value,"onUpdate:modelValue":u[0]||(u[0]=e=>F.value=e),onInput:qe,placeholder:"根据名称查询"},null,8,["modelValue"])]),(0,r.Wm)(Q,{data:(0,t.SU)(B),style:{width:"100%"},"empty-text":"没有数据"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{prop:"name",label:"名称"}),(0,r.Wm)(M,{prop:"target_params.type",label:"类型",formatter:(0,t.SU)(i.rv)},null,8,["formatter"]),(0,r.Wm)(M,{prop:"status",label:"任务启动状态"},{default:(0,r.w5)((e=>[(0,r._)("div",v,[(0,r._)("div",{style:(0,s.j5)({width:"6px",height:"6px",backgroundColor:(0,t.SU)(i.HR)(e.row.status)?.color,borderRadius:"50%",marginRight:"5px"})},null,4),(0,r._)("p",b,(0,s.zw)((0,t.SU)(i.HR)(e.row.status)?.text),1)])])),_:1}),(0,r.Wm)(M,{prop:"updated_at",label:"更新日期",formatter:(0,t.SU)(i.lI)},null,8,["formatter"]),(0,r.Wm)(M,{prop:"operation",label:"操作"},{default:(0,r.w5)((e=>[(0,r._)("div",g,[(0,r.Wm)(A,{effect:"dark",content:"编辑",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(m,{size:"small",circle:"",onClick:(0,o.iM)((a=>ke(e)),["stop"]),class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"edit",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])),[[He,"update"]])])),_:2},1024),(0,r.Wm)(A,{effect:"dark",content:"删除",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(m,{size:"small",circle:"",onClick:(0,o.iM)((a=>(0,t.SU)(i.qK)(e,Ne)),["stop"]),disabled:0==e.row.status||1==e.row.status,class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"delete",stroke:"#f56c6c"})])),_:2},1032,["onClick","disabled"])),[[He,"delete"]])])),_:2},1024),(0,r.Wm)(A,{effect:"dark",content:"启动任务",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[-1===[0,1,5].indexOf(e.row.status)?((0,r.wg)(),(0,r.j4)(m,{key:0,size:"small",circle:"",onClick:(0,o.iM)((a=>Ce(e)),["stop"]),class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"start",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(A,{effect:"dark",content:"停止任务",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[-1!=[0,1].indexOf(e.row.status)?((0,r.wg)(),(0,r.j4)(m,{key:0,size:"small",circle:"",onClick:(0,o.iM)((a=>Se(e)),["stop"]),class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"pause",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(A,{effect:"dark",content:"继续任务",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[-1!=[5].indexOf(e.row.status)?((0,r.wg)(),(0,r.j4)(m,{key:0,size:"small",circle:"",onClick:(0,o.iM)((a=>je(e)),["stop"]),class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"play",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(A,{effect:"dark",content:"日志",placement:"top",offset:2,"popper-class":"el-popper-low"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{size:"small",circle:"",onClick:(0,o.iM)((a=>De(e)),["stop"]),disabled:-1==e.row.status,class:"icon-button"},{default:(0,r.w5)((()=>[(0,r.Wm)(Y,{name:"log",stroke:"var(--el-color-primary)"})])),_:2},1032,["onClick","disabled"])])),_:2},1024)])])),_:1})])),_:1},8,["data"]),(0,r.Wm)(d.Z,{show:n.value,onHandleShow:u[30]||(u[30]=e=>ge(!1))},{popup:(0,r.w5)((()=>[(0,r.Wm)(Ve,{model:P.value,"label-width":"auto",rules:Z,ref_key:"ruleFormRef",ref:T},{default:(0,r.w5)((()=>[(0,r.Wm)($,{label:"出湖任务名",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.name,"onUpdate:modelValue":u[1]||(u[1]=e=>P.value.name=e),disabled:H.value},null,8,["modelValue","disabled"])])),_:1}),(0,r.Wm)($,{label:"出湖数据"},{default:(0,r.w5)((()=>[(0,r._)("div",w,[(0,r.Wm)($,{label:"数据库名",prop:"source_params.dbName"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.source_params.dbName,"onUpdate:modelValue":u[2]||(u[2]=e=>P.value.source_params.dbName=e),onChange:ce,onVisibleChange:ne,disabled:!he(P.value.source_params.env?.id),placeholder:"请选择"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(G).dbNames,((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),(0,r.Wm)($,{label:"表名",prop:"source_params.tableName"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.source_params.tableName,"onUpdate:modelValue":u[3]||(u[3]=e=>P.value.source_params.tableName=e),onChange:ve,onVisibleChange:_e,disabled:!he(P.value.source_params.dbName),placeholder:"请选择"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(G).tableNames,((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])])),_:1}),(0,r.Wm)($,{label:"导出到"},{default:(0,r.w5)((()=>[(0,r._)("div",f,[(0,r.Wm)($,{label:"数据源",prop:"target_params.datasource_id"},{default:(0,r.w5)((()=>[(0,r._)("div",k,[(0,r.Wm)(re,{modelValue:P.value.target_params.datasource_id,"onUpdate:modelValue":u[4]||(u[4]=e=>P.value.target_params.datasource_id=e),onChange:le,onVisibleChange:X,placeholder:"请选择","no-data-text":"没有数据"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(ee),((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,r.Wm)(m,{onClick:u[5]||(u[5]=e=>(0,t.SU)(a).push("/home/dataSource")),style:{"margin-left":"10px"}},{default:(0,r.w5)((()=>[(0,r.Uk)("还没有？去添加")])),_:1})])])),_:1}),[0,3,4].includes(P.value.target_params?.type)?((0,r.wg)(),(0,r.j4)($,{key:0,label:"任务类型"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.resource_params["use_batch"],"onUpdate:modelValue":u[6]||(u[6]=e=>P.value.resource_params["use_batch"]=e),style:{width:"200px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(ae,{label:"批处理任务",value:!0}),(0,r.Wm)(ae,{label:"流式任务",value:!1})])),_:1},8,["modelValue"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)($,{label:" "},{default:(0,r.w5)((()=>[(0,r.Wm)(me,{modelValue:P.value.target_params["radio"],"onUpdate:modelValue":u[7]||(u[7]=e=>P.value.target_params["radio"]=e),onChange:xe,size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(se,{label:"创建新表"}),(0,r.Wm)(se,{label:"选择已存在的表"})])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:"库名",prop:"target_params.db_name"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.target_params["db_name"],"onUpdate:modelValue":u[8]||(u[8]=e=>P.value.target_params["db_name"]=e),onChange:oe,onVisibleChange:te,disabled:!he(P.value.target_params.datasource_id),placeholder:"请选择"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(I).dbNames,((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),"创建新表"===P.value.target_params["radio"]?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)($,{label:"表名",prop:"target_params.table_name"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.target_params["table_name"],"onUpdate:modelValue":u[9]||(u[9]=e=>P.value.target_params["table_name"]=e)},null,8,["modelValue"])])),_:1})])):((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)($,{label:"表名",prop:"target_params.table_name"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.target_params["table_name"],"onUpdate:modelValue":u[10]||(u[10]=e=>P.value.target_params["table_name"]=e),onChange:de,onVisibleChange:ue,disabled:!he(P.value.target_params["db_name"]),placeholder:"请选择"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(I).tableNames,((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),2===P.value.target_params?.type?((0,r.wg)(),(0,r.iD)("div",V,[(0,r.Wm)($,{label:"主键",prop:"target_params.hash_partition_key"},{default:(0,r.w5)((()=>[(0,r.Wm)(re,{modelValue:P.value.target_params["hash_partition_key"],"onUpdate:modelValue":u[11]||(u[11]=e=>P.value.target_params["hash_partition_key"]=e),onVisibleChange:We,disabled:"创建新表"===P.value.target_params["radio"]?!he(P.value.source_params?.tableName):!he(P.value.target_params["table_name"]),multiple:"",clearable:"",placeholder:"请选择"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,t.SU)(K),((e,a)=>((0,r.wg)(),(0,r.j4)(ae,{key:a,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)($,{label:"运行资源配置"},{default:(0,r.w5)((()=>[[0,3,4].includes(P.value.target_params?.type)?((0,r.wg)(),(0,r.iD)("div",W,[(0,r._)("div",x,[(0,r.Wm)($,{label:"source并行度"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["source.parallelism"],"onUpdate:modelValue":u[12]||(u[12]=e=>P.value.resource_params["source.parallelism"]=e),min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:"sink并行度"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["sink.parallelism"],"onUpdate:modelValue":u[13]||(u[13]=e=>P.value.resource_params["sink.parallelism"]=e),min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1})]),(0,r._)("div",U,[(0,r.Wm)($,{label:"checkpoint存储时间间隔(/ms)"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.resource_params["job.checkpoint_interval"],"onUpdate:modelValue":u[14]||(u[14]=e=>P.value.resource_params["job.checkpoint_interval"]=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:"数据库时区"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.resource_params["server_time_zone"],"onUpdate:modelValue":u[15]||(u[15]=e=>P.value.resource_params["server_time_zone"]=e)},null,8,["modelValue"])])),_:1})])])):1==P.value.target_params?.type?((0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("div",C,[(0,r.Wm)($,{label:"同步历史数据"},{default:(0,r.w5)((()=>[(0,r.Wm)(ie,{modelValue:P.value.resource_params["data_consumer_type"],"onUpdate:modelValue":u[16]||(u[16]=e=>P.value.resource_params["data_consumer_type"]=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:"增加时间分区列"},{default:(0,r.w5)((()=>[(0,r.Wm)(ie,{modelValue:P.value.resource_params["is_add_partition"],"onUpdate:modelValue":u[17]||(u[17]=e=>P.value.resource_params["is_add_partition"]=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})]),(0,r._)("div",S,[(0,r.Wm)($,{label:"topic正则表达式",prop:"resource_params.topic_rex",rules:{required:!0,trigger:"blur",message:"不能为空"}},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.resource_params["topic_rex"],"onUpdate:modelValue":u[18]||(u[18]=e=>P.value.resource_params["topic_rex"]=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:"数据库名",prop:"resource_params.dbname",rules:{required:!0,trigger:"blur",message:"不能为空"}},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.resource_params["dbname"],"onUpdate:modelValue":u[19]||(u[19]=e=>P.value.resource_params["dbname"]=e)},null,8,["modelValue"])])),_:1})]),(0,r._)("div",j,[(0,r.Wm)($,{label:"是否存在registry服务"},{default:(0,r.w5)((()=>[(0,r.Wm)(me,{modelValue:R.value,"onUpdate:modelValue":u[20]||(u[20]=e=>R.value=e),size:"small"},{default:(0,r.w5)((()=>[(0,r.Wm)(se,{label:"否"}),(0,r.Wm)(se,{label:"是"})])),_:1},8,["modelValue"]),"是"==R.value?((0,r.wg)(),(0,r.j4)(O,{key:0,modelValue:P.value.resource_params["kafka_schema_registry_url"],"onUpdate:modelValue":u[21]||(u[21]=e=>P.value.resource_params["kafka_schema_registry_url"]=e),placeholder:"请输入url"},null,8,["modelValue"])):(0,r.kq)("",!0)])),_:1})])])):2==P.value.target_params.type?((0,r.wg)(),(0,r.iD)("div",D,[(0,r._)("div",L,[(0,r.Wm)($,{label:"执行器cpu数",prop:"resource_params.executor_cores"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["executor_cores"],"onUpdate:modelValue":u[22]||(u[22]=e=>P.value.resource_params["executor_cores"]=e),min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1}),P.value.resource_params["executor_memory"]?((0,r.wg)(),(0,r.j4)($,{key:0,label:"执行器内存大小",prop:"resource_params.executor_memory",class:"nowrap-form-item"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["executor_memory"][0],"onUpdate:modelValue":u[23]||(u[23]=e=>P.value.resource_params["executor_memory"][0]=e),min:1,"controls-position":"right"},null,8,["modelValue"]),(0,r.Wm)(re,{modelValue:P.value.resource_params["executor_memory"][1],"onUpdate:modelValue":u[24]||(u[24]=e=>P.value.resource_params["executor_memory"][1]=e),placeholder:"单位",class:"unit-el-select"},{default:(0,r.w5)((()=>[(0,r.Wm)(ae,{value:"G",label:"G"})])),_:1},8,["modelValue"])])),_:1})):(0,r.kq)("",!0)]),(0,r._)("div",E,[(0,r.Wm)($,{label:"驱动器cpu数",prop:"resource_params.driver_cores"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["driver_cores"],"onUpdate:modelValue":u[25]||(u[25]=e=>P.value.resource_params["driver_cores"]=e),min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1}),P.value.resource_params["driver_memory"]?((0,r.wg)(),(0,r.j4)($,{key:0,label:"驱动器内存大小",prop:"resource_params.driver_memory",placeholder:"单位",class:"nowrap-form-item"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["driver_memory"][0],"onUpdate:modelValue":u[26]||(u[26]=e=>P.value.resource_params["driver_memory"][0]=e),min:1,"controls-position":"right"},null,8,["modelValue"]),(0,r.Wm)(re,{modelValue:P.value.resource_params["driver_memory"][1],"onUpdate:modelValue":u[27]||(u[27]=e=>P.value.resource_params["driver_memory"][1]=e),placeholder:"单位",class:"unit-el-select"},{default:(0,r.w5)((()=>[(0,r.Wm)(ae,{value:"G",label:"G"})])),_:1},8,["modelValue"])])),_:1})):(0,r.kq)("",!0)]),(0,r.Wm)(be,{class:"self-row"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{label:"执行器数",prop:"resource_params.num_executors"},{default:(0,r.w5)((()=>[(0,r.Wm)(pe,{modelValue:P.value.resource_params["num_executors"],"onUpdate:modelValue":u[28]||(u[28]=e=>P.value.resource_params["num_executors"]=e),min:1,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1})])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)($,{label:"描述"},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{modelValue:P.value.description,"onUpdate:modelValue":u[29]||(u[29]=e=>P.value.description=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,r.Wm)($,{label:" "},{default:(0,r.w5)((()=>[H.value?((0,r.wg)(),(0,r.j4)(m,{key:1,type:"primary",onClick:ye},{default:(0,r.w5)((()=>[(0,r.Uk)("更新")])),_:1})):((0,r.wg)(),(0,r.j4)(m,{key:0,type:"primary",onClick:fe},{default:(0,r.w5)((()=>[(0,r.Uk)("创建")])),_:1})),(0,r.Wm)(m,{onClick:Ue},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show"]),(0,r.Wm)(p.Z,{module:(0,t.SU)(l).state.dataLakeExport.pageInfo,onChangePage:Le},null,8,["module"]),(0,r.Wm)(Oe,{modelValue:z.value,"onUpdate:modelValue":u[31]||(u[31]=e=>z.value=e),title:"日志",direction:"rtl",size:"60%"},{default:(0,r.w5)((()=>[J.value?((0,r.wg)(),(0,r.iD)("pre",q,(0,s.zw)(J.value),1)):((0,r.wg)(),(0,r.j4)(Ee,{key:1,description:"空"}))])),_:1},8,["modelValue"])])}}}),H=l(3744);const z=(0,H.Z)(O,[["__scopeId","data-v-19853d2c"]]);var J=z}}]);
//# sourceMappingURL=220.2a202931.js.map