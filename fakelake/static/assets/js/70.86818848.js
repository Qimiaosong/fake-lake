"use strict";(self["webpackChunkdata_lake_analytics"]=self["webpackChunkdata_lake_analytics"]||[]).push([[70],{70:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});t(7658);var l=t(6252),n=t(2262),o=t(9963),c=t(3907),d=t(9737),r=t(3625),i=t(2201);const s=e=>((0,l.dD)("data-v-06d15993"),e=e(),(0,l.Cn)(),e),u=s((()=>(0,l._)("p",{class:"component-heading"},"工作空间",-1)));var p=(0,l.aZ)({__name:"Workspace",setup(e){const a=(0,c.oR)(),t=(0,i.tv)(),s=(0,n.iH)(!1),p=(0,n.iH)(!1),m=(0,n.qj)({name:"",prefix:"lake-"}),w=(0,l.Fl)((()=>a.state.rightsManagement.curWorkspace?.role_type));(0,l.wF)((()=>{a.dispatch("rightsManagement/getWorkspaceList",{all:!0})}));const f=()=>{_(!0),m.name=""},g=({row:e})=>{d.T.confirm("确定删除吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.dispatch("rightsManagement/deleteWorkspace",{id:e.id,user_id:localStorage.getItem("user_id")})})).catch((()=>{}))},h=async()=>{try{const e=await a.dispatch("rightsManagement/createWorkspace",{user_id:localStorage.getItem("user_id"),newWorkspace:m});_(!1),10036===e?.data?.code&&d.T.confirm("您可创建的工作空间数量已达到上线，如果需要更多资源，请点击 去升级 前往关于页获取License!","提示",{confirmButtonText:"去升级",cancelButtonText:"暂时不用",type:"warning"}).then((()=>{t.push("/home/about")})).catch((()=>{}))}catch(e){console.error(e)}},k=()=>{_(!1)},_=e=>{s.value=e};return(e,t)=>{const c=(0,l.up)("el-button"),d=(0,l.up)("el-table-column"),i=(0,l.up)("SvgIcon"),W=(0,l.up)("el-tooltip"),b=(0,l.up)("el-table"),y=(0,l.up)("el-input"),v=(0,l.up)("el-form-item"),x=(0,l.up)("el-form"),C=(0,l.Q2)("permission");return(0,l.wg)(),(0,l.iD)("div",null,[u,(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{class:"create-btn",type:"primary",onClick:f,disabled:!(0==(0,n.SU)(w))},{default:(0,l.w5)((()=>[(0,l.Uk)("添加工作空间")])),_:1},8,["disabled"])),[[C,"create"]]),(0,l.Wm)(b,{data:(0,n.SU)(a).state.rightsManagement.allWorkspaceList,"default-sort":{prop:"update_at",order:"descending"},style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{prop:"name",label:"工作空间名"}),(0,l.Wm)(d,{prop:"operation",label:"操作"},{default:(0,l.w5)((e=>[(0,l.Wm)(W,{effect:"dark",content:"删除",placement:"top"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{size:"small",circle:"",onClick:(0,o.iM)((a=>g(e)),["stop"]),disabled:!(0==(0,n.SU)(w)),class:"icon-button"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"delete",stroke:"#f56c6c"})])),_:2},1032,["onClick","disabled"])),[[C,"delete"]])])),_:2},1024)])),_:1})])),_:1},8,["data"]),(0,l.Wm)(r.Z,{show:s.value,onHandleShow:t[2]||(t[2]=e=>_(!1))},{popup:(0,l.w5)((()=>[(0,l.Wm)(x,{model:m,"label-width":"200px"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{label:"工作空间名"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:m.prefix,"onUpdate:modelValue":t[0]||(t[0]=e=>m.prefix=e),disabled:"",style:{width:"60px","margin-right":"5px"}},null,8,["modelValue"]),(0,l.Wm)(y,{modelValue:m.name,"onUpdate:modelValue":t[1]||(t[1]=e=>m.name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[p.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0,type:"primary",onClick:h},{default:(0,l.w5)((()=>[(0,l.Uk)("创建")])),_:1})),(0,l.Wm)(c,{onClick:k},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["show"])])}}}),m=t(3744);const w=(0,m.Z)(p,[["__scopeId","data-v-06d15993"]]);var f=w}}]);
//# sourceMappingURL=70.86818848.js.map